# 更新日誌 (Changelog)

本專案的所有重要變更將記錄在此檔案中。

## [Unreleased]

## [2.5.0] - 2025-12-28
### 新增功能
- **🎬 影片 AI 分析優化**:
  - 影片分析現在使用緩存的 9 張截圖（11%~99% 時間點）
  - 合併成 3x3 網格圖發送給 AI，更全面理解影片內容
  - 新增專用「分析影片截圖」Prompt 標籤
  - Prompt 明確告訴 AI 這是影片的多幀截圖，而非單張圖片

- **📝 Prompt 設定優化**:
  - 在 System Prompt 和 User Prompt 輸入欄旁添加「📋 使用預設」按鈕
  - 點擊按鈕可將預設 prompt 填入輸入框，方便用戶修改
  - 解決 placeholder 無法編輯、複製的問題

- **💬 確認對話框捲軸優化**:
  - 限制對話框最大高度為 80vh
  - 當內容過多時（如批量 AI 分析確認）顯示美化捲軸
  - 確保確認按鈕始終可見可點擊

- **📋 歷史記錄面板 UI 簡化**:
  - 每條記錄只顯示檔案列表（小字）
  - 撤銷和清除按鈕水平排列在右側
  - 更緊湊的佈局，提高可讀性

- **📁 檔案衝突處理**:
  - 在「偏好設定」中新增檔案衝突處理選項
  - 三種策略：自動重新命名（預設）、跳過、覆蓋
  - 自動重新命名：衝突檔案自動命名為 file (1).ext, file (2).ext...
  - 跳過：跳過已存在的檔案，不進行任何操作
  - 覆蓋：直接覆蓋目標路徑的同名檔案

### Bug 修復
- **AI 模型設定被覆蓋**:
  - 修復當 prompt 為空時，用戶設定的模型被預設模型覆蓋的問題
  - 現在正確保留用戶在 Prompt 設定中選擇的 AI 模型

## [2.4.0] - 2025-12-27
### 新增功能
- **🔍 全域檔案搜索**:
  - 篩選框現在會搜尋整個目錄樹（包含所有子資料夾）
  - 中文只需 1 個字符即可搜索，英文需 2 個字符
  - 搜索結果顯示父目錄路徑，方便識別
  - 達到結果上限時顯示 ⚠️ 提示

- **⚙️ 搜索偏好設定**:
  - 在「偏好設定」中新增搜索配置區塊
  - 可自訂：最大目錄數、最大檔案數、最大深度、最大結果數
  - 可自訂跳過的目錄（如 node_modules、.git）
  - 預設：500 目錄、5000 檔案、深度 10 層、200 結果

- **🤖 AI 分析 Prompt 改進**:
  - 改進預設 Prompt，明確要求精簡標題式名稱
  - 強調 `name` 是精簡標題（如：粉髮少年設計圖），`description` 是詳細描述
  - 給出好的和不好的範例，讓 AI 更好理解需求
  - **Prompt 語言支援**：使用 `{language}` 變數，根據系統語言設定回覆對應語言

- **🔐 加密壓縮包解壓支援**:
  - 自動偵測壓縮檔是否加密，只有加密檔案才顯示密碼輸入框
  - 支援 ZIP、7Z、RAR 加密格式
  - 📌 密碼釘選功能：點擊可保留密碼用於連續解壓多個同密碼檔案
  - 密碼錯誤或未輸入時立即報錯，不會卡住

- **🐛 錯誤日誌對話框**:
  - Help → 錯誤監測 可打開完整對話框
  - 兩個分頁：本次執行（紅色）/ 歷史紀錄（橘色）
  - 從 `error.log` 檔案讀取歷史記錄
  - 支援清除日誌、刷新功能
  - 即使沒有錯誤也可打開查看狀態

- **⏱️ AI 請求超時機制**:
  - 單一 AI 分析：20 秒超時
  - 批量 AI 分析：每個請求 20 秒
  - AI 檔名分類（🧠）：每批次 30 秒
  - 正則表達式生成：20 秒
  - 超時後顯示友好錯誤訊息

- **📁 緩存目錄重命名**:
  - 緩存目錄從 `.preview_cache` 改為 `.autonova`
  - 在 Windows 上自動設置為隱藏文件夾 (`attrib +h`)
  - 新增 `cacheUtils.ts` 共用模塊統一管理緩存目錄

- **🔧 AI 模型設定強制檢查**:
  - 移除默認模型，必須由用戶在 Prompt 設定中選擇
  - 模型未設定時顯示明確錯誤訊息引導用戶設定

- **📜 歷史操作記錄與撤銷**:
  - Help → 歷史操作記錄 可查看所有檔案操作
  - 三個分頁：移動 / 重命名 / 刪除
  - 每種操作保留最近 5 批次記錄
  - 移動、重命名操作可撤銷回滾
  - 撤銷前驗證檔案狀態，部分無法撤銷時會提示
  - 刪除操作無法程式內撤銷，提示從資源回收筒恢復
  - 美觀的自定義對話框替代原生 alert/confirm

### Bug 修復
- **子資料夾 Shift+click 多選**:
  - 修復在子資料夾內 Shift+click 無法正確多選的問題
  - 現在會動態讀取當前目錄的檔案列表進行範圍選擇

- **舊版 .doc 檔案預覽**:
  - 修復「假 .doc 檔案」（實際為純文字）無法預覽的問題
  - 自動偵測檔案格式（OLE vs 純文字）
  - 支援 UTF-8、Big5、GBK 編碼自動偵測

- **壓縮包解壓卡住問題**:
  - 修復加密壓縮包未輸入密碼或密碼錯誤時解壓進程卡住的問題
  - 關閉 stdin 防止 7zip 等待輸入
  - 添加 60 秒超時保護

- **拖拽到目標資料夾後刷新**:
  - 修復拖拽檔案到右側目標資料夾後，左側列表不刷新的問題

- **AI 建議名稱問題**:
  - 過濾 JSON 解析時的 "none" 關鍵字，避免寫入無效 ADS 標籤
  - 強化名稱重複檢測（忽略大小寫、分隔符）
  - 若 AI 返回和原檔名相同的名稱，嘗試從描述生成替代名稱

- **偏好設定排版**:
  - PDF 快取提示移到開關下方、搜索偏好上方

### 技術實作
- 新增 IPC handler：`fs:searchFiles` 用於遞迴搜索
- 新增 IPC handler：`fs:readErrorLog`、`fs:clearErrorLog` 用於錯誤日誌
- 新增 `SearchPreferences` 類型到 `useSettings.ts`
- 新增 `electron/modules/cacheUtils.ts` 緩存工具模塊
- 更新 `PreferencesDialog` 組件支援搜索偏好設定
- 優化 `parseAiResponse` 函數，增加名稱品質檢測和 none 過濾
- 改進 `handleDocxPreview` 函數，支援非標準 .doc 格式
- 新增壓縮包加密檢測 (`isEncrypted` 屬性於 `ListArchiveResult`)
- 改進 `handleExtractArchive` 添加密碼參數和超時處理
- 為所有 AI API 調用添加 `AbortController` 超時機制
- 重構 `ErrorLogPanel` 為完整對話框組件

## [2.3.0] - 2025-12-26
### 新增功能
- **📦 壓縮檔解壓縮**:
  - 支援 ZIP、7Z、RAR 格式解壓縮
  - 選中單一壓縮檔時，右下角顯示解壓工具區
  - 可自訂輸出資料夾名稱（預設為檔案名，雙擊可編輯）
  - 解壓完成後，原壓縮檔自動移入解壓資料夾
  - 使用預覽畫面選擇的編碼進行解壓

- **📷 EXIF 資訊顯示**:
  - 圖片預覽時自動讀取 EXIF 元數據
  - 顯示：拍攝日期、相機型號、曝光時間、光圈、ISO、焦距
  - GPS 座標可點擊直接開啟 Google Maps
  - 僅在有 EXIF 資料時顯示

- **🗃️ RAR 格式支援**:
  - 新增 `node-unrar-js` 依賴處理 RAR 檔案
  - 支援 RAR 壓縮檔內容預覽列表
  - 授權：MIT (可商用)

- **💰 付費模型警告**:
  - 批量 AI 分析按鈕懸浮提示顯示付費警告
  - 自動檢測模型名稱是否包含 "free"
  - 提醒用戶使用付費模型可能產生費用

- **🎬 視頻預覽功能**:
  - 支援 MP4, MKV, AVI, MOV, WebM 等常見視頻格式
  - 自動擷取 9 幀縮圖 (11%, 22%, ... 99% 位置)
  - 3×3 九宮格佈局顯示，滑鼠懸浮顯示時間碼
  - 顯示視頻資訊：解析度、編碼格式、時長
  - FFmpeg 一鍵下載按鈕 (LGPL ~31MB)
  - 幀縮圖快取 (Base64 JSON)，再次載入秒開

### 技術實作
- EXIF 讀取使用 `exifr` 庫
- RAR 解壓使用 `node-unrar-js`
- ZIP/7Z 解壓使用 `7zip-bin`
- 視頻處理使用 FFmpeg (gyan.dev LGPL essentials)
- 新增 IPC：`fs:extractArchive`、`fs:readExif`、`video:extractFrames`、`video:checkFFmpeg`、`video:downloadFFmpeg`

## [2.2.0] - 2025-12-25
### 新增功能
- **🌐 多語言支援 (i18n)**:
  - 完整支援三種語言：繁體中文 (zh-TW)、英文 (en)、日文 (ja)
  - 語言設定透過右上角「🌐」按鈕切換
  - 語言偏好儲存於 localStorage，重啟後保持
  - Electron 選單跟隨語言切換即時更新

- **國際化涵蓋範圍**:
  - Electron 選單 (File/Edit/View/Window/Help/Settings)
  - 所有對話框 (Settings, About, Help, Preferences, Prompt Settings, Language, Confirm)
  - 工具列按鈕和提示
  - 檔案樹區塊 (排序、篩選、快捷鍵)
  - 預覽面板 (無檔案提示、拖曳提示、旋轉按鈕)
  - 目標資料夾面板 (完整國際化：標題、預設組、表單、提示、PDF 工具)
  - Toast 通知訊息
  - 系統目錄快捷按鈕

- **翻譯鍵統計**:
  - 每種語言均包含約 340+ 個翻譯鍵
  - 使用 react-i18next + i18next 實作
  - 語言檔位於 `src/i18n/locales/`

### 技術實作
- 前端使用 `react-i18next` 的 `useTranslation` hook
- 後端 Electron 選單使用 `getMenuText()` 函數動態翻譯
- IPC 通道 `settings:setLanguage` 觸發選單重建
- 支援變數插值 (例如 `{{count}}` 表示數量)

## [2.1.5] - 2025-12-25
### 新增功能
- **Help 選單法規文件**:
  - 新增「🔒 個資處理」選項，顯示符合台灣《個人資料保護法》的告知書
  - 新增「🛡️ 隱私政策」選項，詳細說明資料蒐集、使用、保護措施
  - 內容涵蓋：蒐集目的、資料類別、利用期間與地區、當事人權利、安全措施
  - 使用現代化 Glassmorphism 對話框設計

- **關於對話框美化**:
  - 將原生 Electron dialog 改為自訂 React 對話框
  - 漸層標題背景 (藍紫粉) 搭配動態光暈效果
  - 顯示版本號、功能圖示 (AI 分析、多格式預覽、快速分類)
  - 技術棧展示 (React, Electron, Tailwind)

### 修復與優化
- **智能選取邏輯修正**:
  - 修復純數字檔名 (如 `203446.jpg`) 錯誤選取不相關檔案的問題
  - 新增距離限制：純數字檔名只選取數值差距 ≤ 1000 的檔案
  - 使用中位數 (median) 計算間隔，更準確偵測離群值
  - 區分「連號模式」(間隔小) 和「同系列模式」(間隔大)
  - 範例：選取 `203446.jpg` 時，只選 `203447.jpg`, `203448.jpg`，排除 `203885.jpg`, `1228047.jpg`

- **正則表達式生成改用 OpenRouter API**:
  - 移除硬編碼的 Webhook URL，改用用戶設定的 OpenRouter API Key
  - 支援 Prompt 設定中的「📝 AI撰寫正則」自訂提示詞
  - 可在 Settings > Prompt 設定中調整 system prompt、user prompt、模型選擇
  - 統一使用 `{folder_name}`, `{folder_description}`, `{language}` 變數

- **資料夾雙擊重命名**:
  - 左側檔案樹中的資料夾現在也可以雙擊來重命名
  - 與檔案重命名操作一致：雙擊進入編輯模式，Enter 確認，Escape 取消

- **目標資料夾位置固定 (slot)**:
  - 刪除目標資料夾後，空位會保留而非向前遞進
  - 新增資料夾時會填入第一個空位，顏色不會重複
  - 鍵盤快捷鍵 1-9 現在對應固定的 slot 位置

- **自訂快捷資料夾 (1-4)**:
  - 左側工具列新增 4 個自訂快捷按鈕 (1-4)
  - 灰色狀態：點擊儲存目前目錄
  - 藍色狀態：左鍵切換目錄，右鍵清除設定
  - 儲存系統預設資料夾時會提示（但不阻止）

- **UI 優化**:
  - 移除排序下拉選單的「排序：」標籤，節省空間
  - 簡化排序選項文字：「按名稱」、「按時間」

## [2.1.4] - 2025-12-25
### 新增功能
- **檔案樹內拖放移動**:
  - 左側檔案列表中的檔案/資料夾現在可以直接拖放到子目錄中
  - 支援多選拖放：選取多個檔案後拖動任意一個，會移動全部選中的檔案
  - 資料夾懸停高亮：拖放目標資料夾會顯示綠色高亮框提示
  - 防止無效操作：不能將資料夾拖入自己或其子目錄
  - 移動後自動刷新檔案列表並顯示狀態提示

- **篩選功能增強**:
  - 篩選框現在也會篩選已展開子目錄內的檔案
  - 子目錄會保持顯示（以便導航），但其中不符合篩選條件的檔案會被隱藏
  - UI 優化：移除篩選結果數量顯示，保持介面簡潔

## [2.1.3] - 2025-12-24
### 新增功能
- **PDF 多頁預覽**:
  - PDF 檔案現在顯示多個代表性頁面，而非單一首頁
  - 智能選頁規則:
    - 7 頁以上: 顯示 6 頁 (0%, 20%, 40%, 60%, 80%, 100% 位置)
    - 3-6 頁: 顯示 3 頁 (首頁、中間頁、末頁)
    - 1-2 頁: 顯示全部
  - 網格佈局一次顯示所有選定頁面，無需滾動
  - 每頁右下角顯示頁碼 (例: `15/25`)

- **PDF 快取模式設定**:
  - 設定 → 偏好設定 → 新增「PDF 快取模式」開關
  - **關閉 (預設)**: 前端使用 pdfjs 即時渲染，放大清晰但載入較慢
  - **開啟**: 後端生成多頁拼接快取圖，載入快速但放大會模糊
  - 快取存至 `.preview_cache/{MD5}_grid.png`
  - 快取模式顯示 `25 頁 (快取)` 提示

- **PDF 預覽互動功能**:
  - 拖拽平移 (Drag to Pan): 任意滑鼠鍵拖動視圖
  - Ctrl + 滾輪縮放 (Zoom): 最大 500%
  - 🔄 Reset 按鈕一鍵復位

### 修復與優化
- 修復 `pdfjs-dist` 在 Node.js 環境中要求 `Uint8Array` 而非 `Buffer` 的問題
- 優化 PDF 渲染效能，前端 Canvas 使用 1.5x scale
- 後端快取渲染使用 1.0x scale 以平衡品質與檔案大小

## [2.1.2] - 2025-12-24
### 新增功能
- **AI 批量自動套用 (Batch Apply)**:
  - 檔案列表頭部新增「一鍵套用」按鈕 (⚡ 閃電圖示)
  - 一鍵將所有「已完成分析但尚未套用」的 AI 結果批量寫入
  - 支援批量重命名檔案 + 寫入 ADS 元數據描述與關鍵字
  - 執行前顯示確認對話框，列出所有預計變更
  - 獨立的批量處理進度條與錯誤摘要報告

- **AI 編輯偏好記憶**:
  - 新增「替換原檔名」核取方塊的記憶功能 (Per-file Persistence)
  - 用戶對 AI 建議結果 (名稱/關鍵字/描述) 的手動修改現在會暫存
  - 切換檔案後再回來，之前的編輯內容不會遺失
  - 批量套用時會優先使用用戶手動編輯過的版本

### 修復與優化
- **UI 視覺優化**:
  - 更換魔法棒按鈕為更清晰通用的閃電圖示 (⚡)
  - 優化檔案列表篩選器，隱藏警告按鈕右側的冗餘計數文字
  - 計數改為僅在滑鼠懸停 (Tooltip) 時顯示

- **穩定性修復**:
  - 修復 `PreviewPanel` 在特定情況下可能造成的 **白屏崩潰 (White Screen of Death)**
  - 加入 React `ErrorBoundary` 機制，發生渲染錯誤時顯示友好的錯誤介面而非整頁空白
  - 修復 `aiStates` 變數在初始化前被存取的 ReferenceError 錯誤


## [2.1.1] - 2025-12-24
### 修復
- **修復 pdfjs-dist ESM 相容性問題**:
  - pdfjs-dist v5 是 ESM 模組，無法使用 `require()` 導入
  - 降級至 pdfjs-dist@3.11.174 (支援 CommonJS)
  - 更新導入路徑: `pdf.mjs` → `pdf.js`
  - 更新前端 worker 路徑: `pdf.worker.min.mjs` → `pdf.worker.min.js`
  - 此修復恢復了 PDF 預覽和 PDF 轉 JPG 功能

### 重構
- **App.tsx 模組化拆分** (減少 300 行，-23%):
  - 提取智能選擇邏輯至 `src/hooks/useSmartSelection.ts`
  - 提取所有 Toast 組件至 `src/components/Toasts.tsx`:
    - MoveStatusToast, BatchProgressToast, AnalysisProgressToast
    - BatchAiProgressToast, SmartSuggestionToast, ErrorLogPanel

### 改進
- **圓餅圖視覺增強**:
  - 更大的尺寸 (200px)
  - 甜甜圈 (Donut) 樣式，中心留空
  - 多層陰影效果增強立體感
  - 透明度 + 漸變高光
  - 懸浮放大動畫

## [2.1.0] - 2025-12-22
### 重大變更 (商業授權準備)
- **移除 Poppler GPL 依賴**:
  - PDF 預覽改用 `pdfjs-dist` + `canvas` 生成縮圖
  - PDF 轉 JPG 功能改用 `pdfjs-dist` + `canvas` + `sharp` 實現
  - 不再需要 `bin/poppler/` 目錄中的 GPL 工具
  - 此變更消除了 GPL 授權傳染風險，允許商業閉源發行

- **LibreDWG 外挂模式**:
  - DWG 預覽功能改為「可選外挂」架構
  - 自動搜尋多個位置: `plugins/libredwg/`, `%APPDATA%/plugins/libredwg/`, `bin/` (向後相容)
  - 用戶需自行下載 LibreDWG 到 `plugins/libredwg/` 目錄
  - 未安裝時顯示友好提示，包含「📥 下載 LibreDWG」按鈕
  - 新增 `docs/plugins.md` 安裝指南
  - 主程式不再包含 GPL 授權的 LibreDWG 二進制檔案

### 新增功能
- **openExternal API**: 新增開啟外部 URL 的 IPC 處理器
- **AI 分析待處理指示器**:
  - 左側檔案列表中，有尚未套用 AI 分析結果的檔案會顯示 ⚠️ 圖示
  - 新增 ⚠️ 篩選按鈕，可快速篩選只顯示有待處理 AI 結果的檔案
- **AI 結果可編輯**:
  - 建議名稱、關鍵字、描述都支援雙擊編輯
  - 編輯後的值會在套用時寫入 ADS 標籤
- **簡化 AI 結果操作**:
  - 移除「寫入標籤」按鈕
  - 「智慧重命名」改為「✅ 套用」按鈕（綠色）
  - 一鍵完成重命名 + 寫入 ADS 標籤

### 改進
- **檔名過濾邏輯優化**:
  - 新增更多無意義檔名模式過濾 (Gemini_Generated_Image, ilovepdf, untitled 等)
  - 新增擴展名黑名單 (.dll, .exe, .sys 等系統檔案不送 LLM 分析)
  - 修復過濾邏輯導致所有檔案被跳過的問題

### 文件更新
- 新增 `docs/plugins.md` - 外挂安裝指南

## [2.0.0] - 2025-12-21
### 新增功能
- **批量 Webhook AI 分析**:
  - 新增機器人按鈕 (🤖)，支援選取最多 20 個檔案進行深度分析
  - 自動壓縮圖片 (1024px, JPEG 80%) 以優化 Webhook 傳輸
  - 獨立的進度顯示狀態與中間預覽區懸浮提示
- **美化刪除確認**:
  - 使用自定義的 `ConfirmDialog` 取代原生瀏覽器彈窗
  - 支援顯示多個檔案的詳細資訊

### 修復與優化
- 修復 Webhook 傳送大圖片導致 500 錯誤的問題
- 優化刪除功能的代碼結構
- **批量移動錯誤顯示優化**:
  - 失敗時顯示詳細的檔案名稱與錯誤原因列表
  - 有錯誤時提示框保留 15 秒（原本立即消失）
  - 新增手動關閉按鈕 (✕)

## [0.1.1] - 2025-12-21
### 新增功能
- **AI 檔案分類 (OpenRouter 免費模型)**:
  - 使用 OpenRouter API 的 `xiaomi/mimo-v2-flash:free` 免費模型
  - 點擊左側標題列的 🧠 按鈕啟動 AI 分類
  - 根據檔名和 ADS 描述自動判斷最適合的目標資料夾
  - 批量處理：每 20 個檔案一次請求，節省 token
  - 只使用語義類資料夾（跳過正則類）
- **OpenRouter API Key 設定**:
  - 在設定對話框中新增 OpenRouter API Key 欄位
  - 支援免費模型，無需付費

### 改進
- **無意義檔名過濾**:
  - 自動跳過相機/裝置命名模式（IMG_、DSC_、VID_、DCIM_、DJI_、GOPR 等）
  - 過濾 LINE 圖片命名（S__數字）
  - 過濾純數字、UUID、時間戳格式
  - 過濾 messageImage_數字、Generated Image 日期 等格式
  - 智能提取有意義部分（如 `messageImage_123_報告` → `報告`）
- **ADS 描述整合**:
  - 將 NTFS ADS 中的描述帶入 AI 分類
  - 即使檔名無意義，有 ADS 描述仍可分類
- **UI 優化**:
  - AI 分析進度框改為簡潔的轉圈動畫
  - 進度框移至視窗左下角，不影響檔案瀏覽
  - 智能建議框移至中間預覽區右下角

## [0.1.0] - 2025-12-19
### 新增功能
- **鍵盤快捷鍵分配檔案**:
  - 按 1-9 (小鍵盤或主鍵盤) 將選中的檔案分配到對應編號的目標資料夾
  - 按 0 取消選中檔案的顏色分配
  - 檔案分配後會在左側檔案樹中顯示對應的顏色標記
- **九宮格目標資料夾佈局**:
  - 右側目標資料夾改為 3×3 九宮格佈局
  - 對應小鍵盤數字排列 (7-8-9 上排、4-5-6 中排、1-2-3 下排)
  - 每格顯示：數字快捷鍵、資料夾名稱、描述、匹配模式
- **資料夾預設組**:
  - 可將當前資料夾配置保存為預設組
  - 下拉選單快速切換不同的預設組
  - 支援更新、刪除預設組
  - 預設組包含完整配置（路徑、顏色、描述、匹配模式、正則表達式）
- **一鍵清除顏色標示**:
  - 左側標題列新增 🚫 按鈕，一鍵清除所有檔案的顏色分配
- **正則表達式套用**:
  - 點擊右側格子中的正則表達式可自動篩選並標記符合的檔案
  - 改用 Toast 通知顯示操作結果（取代原生 alert）

### 改進
- **鮮明顏色**:
  - 九種顏色改為更鮮明的版本：白、紅、橙、黃、綠、藍、靛、紫、黑
  - 顏色更易於區分辨識
- **UI 優化**:
  - 放大資料夾名稱和描述字體
  - 懸停時顯示完整路徑和描述的 tooltip
  - 編輯和刪除按鈕改為緊湊圖標
  - 正則表達式按鈕添加⚡圖標

### 修正
- **編輯輸入框**:
  - 修復描述輸入框無法輸入數字的問題（鍵盤事件被全局快捷鍵攔截）
  - 添加 onKeyDown、onKeyUp、onKeyPress 阻止事件冒泡

## [0.0.9] - 2025-12-13
### 新增功能
- **預覽區自適應**: 中間預覽面板現在會自動填滿視窗可用空間。
- **統一縮放/平移控制**: 圖片、PDF、DWG 預覽都支援：
  - ➖➕ 按鈕縮放
  - 🔄 重置視圖
  - 滑鼠拖曳平移
  - Ctrl + 滾輪縮放
  - 滾輪平移
- **AI 結果持久化**: AI 分析結果現在會自動保存到檔案目錄的 `.preview_cache/ai_results.json`。
  - 下次開啟程式時會自動載入已保存的結果
  - 套用 AI 建議重命名後自動刪除結果
  - 移動檔案後自動刪除結果
- **PSD 預覽**: 新增 Adobe Photoshop (PSD) 檔案預覽支援。
  - 使用 psd.js 解析 PSD 合成圖層
  - 支援縮放/平移控制
  - 預覽結果會快取到 `.preview_cache` 加速後續載入
- **Office 文件預覽**: 新增 Word 和 Excel 檔案預覽支援。
  - **DOC/DOCX**: 使用 mammoth.js (新格式) 和 word-extractor (舊格式) 提取文字內容
  - **XLS/XLSX**: 使用 xlsx 套件讀取工作表並顯示為表格
  - 支援截斷提示（文件過大時顯示部分內容）
- **Blender 預覽**: 新增 Blender (.blend) 檔案預覽支援。
  - 使用手動二進位解析提取嵌入的縮圖 (TEST block)
  - 自動處理 32/64-bit 指標和大小端序
  - 縮圖轉換為 PNG 並快取
  - **漸進式載入**: 先顯示嵌入縮圖，同時背景渲染高品質預覽
  - **HQ 渲染**: 使用 Blender CLI 渲染 512x512 場景預覽 (需安裝 Blender)
- **圖片旋轉**: 圖片預覽新增旋轉功能 (↻)。
  - 支援 jpg, png, webp 等格式
  - 順時針 90 度旋轉
  - 無損/高品質保存 (使用 sharp 處理)

### 修正
- **AI 分析 Webhook**: 傳送給 AI 的 `fileName` 現在不包含副檔名。
- 移除過時的「AI 功能即將推出」提示區塊。

## [0.0.8] - 2025-12-13
### UX 改進
- **AI 全域狀態**: 重構 AI 分析狀態管理，允許在分析過程中切換檔案而不遺失進度。
- **一鍵重新命名**: 在 AI 分析結果卡片中加入「套用新檔名」按鈕。
- **分析修正**: 修正傳送給 AI 的 Base64 資料格式，確保包含純資料欄位以便正確解碼。
- **PDF 分析**: PDF 檔案會自動讀取快取的預覽圖片（第一頁），送往 AI 分析。

## [0.0.7] - 2025-12-13
### 新增功能
- **DWG CAD 預覽支援**: 
  - 透過 LibreDWG (`dwg2SVG.exe`) 整合，支援 DWG/DXF 檔案預覽。
  - 自動轉換為高品質 SVG 進行渲染。
  - **互動式檢視器**:
    - **縮放**: 支援按鈕縮放或 Ctrl + 滑鼠滾輪 (以游標為中心)。
    - **平移**: 支援滑鼠左鍵/中鍵/右鍵拖曳畫布。
    - **顏色反轉**: 可切換線條顏色 (針對黑色線條在黑色背景看不見的問題)。
    - **背景切換**: 可切換黑/白背景。
- **跨裝置檔案分析與移動**:
  - 修復跨硬碟 (例如 C: 到 D:) 移動檔案時的 `EXDEV` 錯誤。
  - 實作「先複製再刪除」的備援機制，確保跨槽移動穩定性。

### 變更
- 優化預覽面板以支援複雜的互動內容。
- 新增 `bin/README.md` 包含外部工具 (LibreDWG) 的安裝說明。

## [0.0.6] - 2025-12-13
### 新增功能
- **PDF 預覽**: 
  - 內嵌瀏覽器原生 PDF 檢視器。
  - 使用 `file://` 協定實現秒開載入。
  - 支援完整的 PDF 捲動、縮放與分頁功能。
- **效能優化**:
  - 圖片預覽改用 `file://` 直接讀取 (不再轉為 base64)。
  - 停用 `webSecurity` 以允許本地檔案直讀，大幅提升大圖載入速度。

### 變更
- 增加預覽區高度至 600px 以優化 PDF 閱讀體驗。
- 移除 2MB 圖片大小限制 (直讀模式不再受限)。

## [0.0.5] - 2025-12-13
### 新增功能
- **壓縮檔編碼選擇器**:
  - 新增編碼下拉選單 (UTF-8, GBK, Big5, Shift-JIS, EUC-KR)。
  - 解決壓縮檔內中文/日文/韓文檔名亂碼問題。
  - 切換編碼時自動重新讀取內容。
- **強化拖放功能**:
  - 支援直接從左側檔案樹拖曳檔案。
  - 優化拖曳至目標資料夾時的視覺回饋。
  - 資料夾圖示在接收檔案時會變成 📥。
  - 新增「放開以移動檔案」的提示指標。

### 變更
- 壓縮檔列表改用 spawn process 以獲得更好的編碼控制。
- 限制壓縮檔預覽顯示前 100 個項目以確保效能。

## [0.0.4] - 2025-12-13
### 新增功能
- **文字/程式碼預覽**: 
  - 支援 TXT, MD, LOG, CSV 等純文字檔。
  - 支援程式碼檔案 (JS, TS, Python, Java, C++ 等)。
  - 關鍵字語法高亮 (Syntax Highlighting)。
  - 大檔案自動截斷 (限制 30KB 預覽) 避免卡頓。
- **壓縮檔內容預覽 (Peeking)**:
  - 無需解壓縮即可查看 ZIP, RAR, 7Z 內容列表。
  - 顯示檔名、大小與資料夾結構。
  - 使用 7zip-bin 確保跨平台相容性。
- **IPC 處理器**:
  - `fs:readTextFile` - 讀取文字檔內容。
  - `fs:listArchive` - 讀取壓縮檔列表。

## [0.0.3] - 2025-12-13
### 新增功能
- **目標面板組件 (Destination Panel)**: 
  - 支援透過原生對話框新增/移除目標資料夾。
  - 彩色資料夾卡片設計。
  - 雙擊可重新命名資料夾。
  - 支援接收拖放檔案。
- **設定持久化**: 
  - 目標資料夾設定自動儲存至 localStorage。
  - 記憶上次開啟的來源路徑。
- **預覽面板組件 (Preview Panel)**:
  - 基礎圖片預覽 (JPG, PNG, GIF, WebP 等)。
  - 檔案資訊顯示 (大小、修改日期)。
  - 檔案類型圖示與分類。
  - 拖曳移動功能與視覺回饋。
- **檔案移動功能**:
  - 支援從預覽區拖曳檔案到目標資料夾。
  - 成功/失敗的 Toast 通知。
  - 移動後自動清除選取狀態。
- **右鍵複製路徑**:
  - 檔案樹支援右鍵選單複製完整路徑。

### 修復
- 圖片預覽改用 base64 編碼以繞過 Electron 安全限制 (於 v0.0.6 優化)。

## [0.0.2] - 2025-12-13
### 新增功能
- **IPC 通訊**: 實作 Electron IPC 處理器：
  - `dialog:openFolder` - 開啟資料夾選擇框。
  - `fs:readDir` - 讀取目錄內容。
  - `fs:getStats` - 獲取檔案資訊。
  - `fs:moveFile` - 移動檔案。
- **檔案樹組件 (FileTree)**: 互動式檔案樹：
  - 懶加載目錄展開 (Lazy loading)。
  - 檔案類型圖示 (Emoji)。
  - 選取高亮效果。
  - 平滑動畫 (Framer Motion)。
- **來源面板**: 「開啟資料夾」按鈕功能。
- **預覽舞台**: 基礎檔案資訊顯示。
- **型別定義**: Electron API 的 TypeScript 定義。

### 變更
- 更新 `main.ts` 視窗大小限制 (1400x900, 最小 1000x600)。
- 改進 UI 樣式，加入玻璃擬態效果。

## [0.0.1] - 2025-12-12
### 新增功能
- **專案結構**: 初始化 Electron + Vite + React + TypeScript。
- **樣式**: 設定 Tailwind CSS v3 與 PostCSS。
- **佈局**: 實作三欄式佈局 (來源、舞台、目標) 於 `App.tsx`。
- **路線圖**: 定義 10 步驟實作計畫。

### 變更
- 將初始文件移至 `docs/` 資料夾。
- 移除預設樣式，改用 Tailwind。
